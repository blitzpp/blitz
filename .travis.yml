language: cpp

os:
  - linux
#  - osx TODO

compiler:
  - gcc
  - clang

# TODO: Debug & Release modes

install:
  - sudo apt-get --no-install-recommends install texinfo texlive-base

script:
  - aclocal
  - libtoolize
  # TODO: (fails with configure.ac:10: error: required file 'blitz/config.h.in' not found)
  - autoconf
  - automake --add-missing
  #- autoreconf
  - ./configure
  - make lib
  - make lib                 # Check the compiler and create libblitz.a
  # TODO: make a failure result in non-zero exit code! (see https://travis-ci.org/slayoo/blitz/builds/359545927)
  - make check-testsuite     # Build and check the testsuite
  - make check-examples      # Build and check the examples
  # TODO! (fails with error: no such file or directory: 'arrdaxpyf.o')
  - make check-benchmarks    # Build and check the benchmarks (takes a long time)
  - sudo make install        # Install Blitz++
  - make info                # Build Blitz++ texinfo documentation
  - make ps                  # Build Blitz++ ps documentation
  - make pdf                 # Build Blitz++ pdf documentation
  - make html                # Build Blitz++ html documentation
  - sudo make install-info   # Install Blitz++ texinfo documentation
  - sudo make install-ps     # Install Blitz++ ps documentation
  - sudo make install-pdf    # Install Blitz++ pdf documentation
  - sudo make install-html   # Install Blitz++ html documentation
